var lowestPriceWithFeeRegExp=/<span class="market_listing_price market_listing_price_with_fee">\s*(((?!Sold).)*?)\s*<\/span>/i,lowestPriceWithoutFeeRegExp=/<span class="market_listing_price market_listing_price_without_fee">\s*(((?!Sold).)*?)\s*<\/span>/i,insGemExp=/<span style="font-size: 18px; color: rgb\(255, 255, 255\)">(((?!:).)*?): \d+<\/span><br><span style="font-size: 12px">Inscribed Gem<\/span>/gi,kinGemExp=/<span style="font-size: 18px; color: rgb\(255, 255, 255\)">(((?!<).)*?)<\/span><br><span style="font-size: 12px">Kinetic Gem<\/span>/gi,priGemExp=/<span style="font-size: 18px; color: rgb\(\d+, \d+, \d+\)">(((?!<).)*?)<\/span><br><span style="font-size: 12px">Prismatic Gem<\/span>/gi,ethGemExp=/<span style="font-size: 18px; color: rgb\(255, 255, 255\)">(((?!<).)*?)<\/span><br><span style="font-size: 12px">Ethereal Gem<\/span>/gi,corGemExp=/<span style="font-size: 18px; color: rgb\(255, 255, 255\)">(((?!:).)*?): \d+<\/span><br><span style="font-size: 12px">Foulfell Shard<\/span>/gi,masGemExp=/<span style="font-size: 18px; color: rgb\(255, 255, 255\)">(((?!:).)*?): \d+<\/span><br><span style="font-size: 12px">Rune of the Duelist Indomitable<\/span>/gi,buyingExp=/javascript:BuyMarketListing\('listing', '(\d+)', (\d+), '(\d+)', '(\d+)'\)/,cachePrices={},itemsInTrades=[],sellingStack={},selectmode=!1,currencyId=1,sellcurrencyId=1,lastSelectedItem=null,apiItems={},someIds=["abcdef","76561198090734441"],dotahatteryAlias={doom_bringer:"doom",treant:"treant_protector",shadow_shaman:"shadowshaman",naga_siren:"siren",nyx_assassin:"nerubian_assassin",drow_ranger:"drow",riki:"rikimaru",templar_assassin:"lanaya",nevermore:"shadow_fiend",vengefulspirit:"vengeful",witch_doctor:"witchdoctor",gyrocopter:"gyro",tusk:"tuskarr",bloodseeker:"blood_seeker",skeleton_king:"wraith_king"},econItemExp,GetItemsInTrades;typeof BShouldSuppressFades=="undefined"&&(BShouldSuppressFades=function(){return!1});var checkPrice=function(){var n=$J("#iteminfo0").is(":visible")?0:1,t=$J("#iteminfo"+n+"_item_name").text();getLowestPriceHandler()},reloadDes=function(){var n="iteminfo"+iActiveSelectView,t=$(n+"_item_descriptors");PopulateDescriptions(t,g_ActiveInventory.selectedItem.descriptions)},mediumPrice=0,mediumName="",getSetLink=function(n,t,i){var u=n.market_hash_name||n.value,r=window.location.protocol+"//steamcommunity.com/market/priceoverview/?appid=570&country="+g_strCountryCode+"&currency="+currencyId+"&market_hash_name="+(i?"Genuine%20":"")+encodeURIComponent(u),f;if(n.setLink=r,n.isinset=!0,cachePrices[r]&&cachePrices[r].lowestPrice){n.app_data.price=cachePrices[r].lowestPrice;n.app_data.market_hash_name=cachePrices[r].market_hash_name;n.app_data.owned=cachePrices[r].owned;t===g_ActiveInventory.selectedItem&&reloadDes();return}cachePrices[r]={market_hash_name:(i?"Genuine ":"")+u};f=new RegExp(".*"+cachePrices[r].market_hash_name.replace("The ","(The )?")+"$");$J.each(g_ActiveInventory.rgInventory,function(){if(f.test(this.market_hash_name))return cachePrices[r].market_hash_name=this.market_hash_name,cachePrices[r].owned=!0,!1});PriceQueue.GetPrice({method:"GET",url:r,success:function(r){var o=0,s=0,e,f;if(r.success)if(r.median_price){if(cachePrices[this.url].lowestPrice=o=r.lowest_price,cachePrices[this.url].nofeePrice=s=r.median_price,r.volume&&(cachePrices[itemLink].volume=r.volume),t===g_ActiveInventory.selectedItem){for(e=0;e<t.descriptions.length;e++)if(f=t.descriptions[e],f.setLink==this.url){f.app_data.price=cachePrices[this.url].lowestPrice;f.app_data.market_hash_name=cachePrices[this.url].market_hash_name;f.app_data.owned=cachePrices[this.url].owned;break}reloadDes()}}else u.indexOf("The ")==0&&(n.market_hash_name=u.substring(4),getSetLink(n,t,i));else u.indexOf("The ")==0&&(n.market_hash_name=u.substring(4),getSetLink(n,t,i))},error:function(){u.indexOf("The ")==0&&(n.market_hash_name=u.substring(4),getSetLink(n,t,i))}})},getMediumPrice=function(n){n.market_hash_name||(n.market_hash_name=n.name);var t=window.location.protocol+"//steamcommunity.com/market/priceoverview/?appid="+n.appid+"&country="+g_strCountryCode+"&currency="+currencyId+"&market_hash_name="+encodeURIComponent(n.market_hash_name);mediumName=n.market_hash_name;PriceQueue.GetPrice({method:"GET",url:t,success:function(n){n.success&&(mediumPrice=n.lowest_price)}})},getGiftPrice=function(n){var i=n.actions[0].link,t=/http:\/\/store.steampowered.com\/app\/(\d+)\//.exec(i)[1];$J(".dd_price").html("Loading...");$J.ajax({url:"//store.steampowered.com/api/appdetails?appids="+t,crossDomain:!0,success:function(n){if(n&&n[t]&&n[t].success){var i=n[t].data.price_overview,r="";r=i.discount_percent>0?i.final/100+" (-"+i.discount_percent+") "+i.currency:i.final/100+" "+i.currency;$J(".dd_price").html(r)}},error:function(){$J(".dd_price").html("Error")}})},getLowestPriceHandler=function(n,t){var i=n||g_ActiveInventory.selectedItem,o,u,s,h,r,l,a,c,v;if(i.appid!=753||!i.actions||!i.actions[0].link||!i.actions[0].link.startsWith("http://store.steampowered.com/app/")){i.market_hash_name||(i.market_hash_name=i.name);var w=encodeURIComponent(name),b=g_ActiveInventory.appid,y=!1,f=window.location.protocol+"//steamcommunity.com/market/priceoverview/?appid="+i.appid+"&country="+g_strCountryCode+"&currency="+currencyId+"&market_hash_name="+encodeURIComponent(i.market_hash_name),e=window.location.protocol+"//steamcommunity.com/market/priceoverview/?appid="+i.appid+"&country="+g_strCountryCode+"&currency="+sellcurrencyId+"&market_hash_name="+encodeURIComponent(i.market_hash_name),p=window.location.protocol+"//steamcommunity.com/market/listings/"+i.appid+"/"+encodeURIComponent(i.market_hash_name);if(cachePrices[f]&&cachePrices[f].nofeePrice?(i.nofeePrice=cachePrices[f].nofeePrice,i.lowestPrice=cachePrices[f].lowestPrice,i.providerName=cachePrices[f].providerName):cachePrices[f]={market_hash_name:i.market_hash_name,owned:!0},cachePrices[e]&&cachePrices[e].nofeePrice?(i.nofeePriceW=cachePrices[e].nofeePrice,i.lowestPriceW=cachePrices[e].lowestPrice,i.providerName=cachePrices[e].providerName):cachePrices[e]={market_hash_name:i.market_hash_name,owned:!0},$J.each(i.tags,function(){return y=y||this.category=="Quality"&&this.internal_name=="genuine",y?!1:void 0}),window.agp_gem&&i.type!=="Rare Inscribed Gem"&&i.appid==570)for(h=0;h<i.descriptions.length;h++){if(r=i.descriptions[h],r.insgems)break;for(u=0,r.insgems=[];o=insGemExp.exec(r.value);)s=window.location.protocol+"//steamcommunity.com/market/priceoverview/?appid=570&country="+g_strCountryCode+"&currency="+currencyId+"&market_hash_name=Inscribed "+o[1],r.insgems.push({name:"Inscribed "+o[1]}),PriceQueue.GetPrice({method:"GET",url:s,pars:{gemidx:u},success:function(n,t){var u=0,f=0;n.success&&(u=n.lowest_price,f=n.median_price,r.insgems[t.gemidx].lowestPrice=u,r.insgems[t.gemidx].nofeePrice=f,i===g_ActiveInventory.selectedItem&&reloadDes())},error:function(){}}),u++;while(o=kinGemExp.exec(r.value))s=window.location.protocol+"//steamcommunity.com/market/priceoverview/?appid=570&country="+g_strCountryCode+"&currency="+currencyId+"&market_hash_name=Kinetic: "+o[1],r.insgems.push({name:"Kinetic: "+o[1]}),PriceQueue.GetPrice({method:"GET",url:s,pars:{gemidx:u},success:function(n,t){var u=0,f=0;n.success&&(u=n.lowest_price,f=n.median_price,r.insgems[t.gemidx].lowestPrice=u,r.insgems[t.gemidx].nofeePrice=f,i===g_ActiveInventory.selectedItem&&reloadDes())},error:function(){}}),u++,console.log(u);while(o=masGemExp.exec(r.value))s=window.location.protocol+"//steamcommunity.com/market/priceoverview/?appid=570&country="+g_strCountryCode+"&currency="+currencyId+"&market_hash_name=Rune%20of%20the%20Duelist%20Indomitable",r.insgems.push({name:"Rune%20of%20the%20Duelist%20Indomitable"}),PriceQueue.GetPrice({method:"GET",url:s,pars:{gemidx:u},success:function(n,t){var u=0,f=0;n.success&&(u=n.lowest_price,f=n.median_price,r.insgems[t.gemidx].lowestPrice=u,r.insgems[t.gemidx].nofeePrice=f,i===g_ActiveInventory.selectedItem&&reloadDes())},error:function(){}}),u++,console.log(u);while(o=corGemExp.exec(r.value))s=window.location.protocol+"//steamcommunity.com/market/priceoverview/?appid=570&country="+g_strCountryCode+"&currency="+currencyId+"&market_hash_name=Foulfell Shard",r.insgems.push({name:"Foulfell Shard"}),PriceQueue.GetPrice({method:"GET",url:s,pars:{gemidx:u},success:function(n,t){var u=0,f=0;n.success&&(u=n.lowest_price,f=n.median_price,r.insgems[t.gemidx].lowestPrice=u,r.insgems[t.gemidx].nofeePrice=f,i===g_ActiveInventory.selectedItem&&reloadDes())},error:function(){}}),u++,console.log(u);while(o=ethGemExp.exec(r.value))s=window.location.protocol+"//steamcommunity.com/market/priceoverview/?appid=570&country="+g_strCountryCode+"&currency="+currencyId+"&market_hash_name=Ethereal: "+o[1],r.insgems.push({name:"Ethereal: "+o[1]}),PriceQueue.GetPrice({method:"GET",url:s,pars:{gemidx:u},success:function(n,t){var u=0,f=0;n.success&&(u=n.lowest_price,f=n.median_price,r.insgems[t.gemidx].lowestPrice=u,r.insgems[t.gemidx].nofeePrice=f,i===g_ActiveInventory.selectedItem&&reloadDes())},error:function(){}}),u++,console.log(u);while(o=priGemExp.exec(r.value))s=window.location.protocol+"//steamcommunity.com/market/priceoverview/?appid=570&country="+g_strCountryCode+"&currency="+currencyId+"&market_hash_name=Prismatic: "+o[1],r.insgems.push({name:"Prismatic: "+o[1]}),PriceQueue.GetPrice({method:"GET",url:s,pars:{gemidx:u},success:function(n,t){var u=0,f=0;n.success&&(u=n.lowest_price,f=n.median_price,r.insgems[t.gemidx].lowestPrice=u,r.insgems[t.gemidx].nofeePrice=f,i===g_ActiveInventory.selectedItem&&reloadDes())},error:function(){}}),u++,console.log(u);u>0?console.log(r):delete r.insgems}if(window.agp_sticker&&i.appid==730)for(h=0;h<i.descriptions.length;h++)if(r=i.descriptions[h],r.type=="html"&&r.value.startsWith('<br><div id="sticker_info" name="sticker_info" title="Sticker Details"')&&!r.stickers){if(r.orgvalue=r.value,r.isstickers=!0,l=r.value.indexOf("<br>Sticker:"),l==-1||r.stickers)break;for(a=r.value.substr(l+12,r.value.length-(l+27)).split(","),r.stickers=[],c=0;c<a.length;c++)r.stickers.push({name:a[c].trim()}),v=window.location.protocol+"//steamcommunity.com/market/priceoverview/?appid=730&country="+g_strCountryCode+"&currency="+currencyId+"&market_hash_name=Sticker | "+a[c].trim(),cachePrices[v]?(r.stickers[c].prices=cachePrices[v],i===g_ActiveInventory.selectedItem&&reloadDes()):PriceQueue.GetPrice({method:"GET",url:v,pars:{stickeridx:c},success:function(n,t){var u=0,f=0;n.success&&(u=n.lowest_price,f=n.median_price,r.stickers[t.stickeridx].prices={lowestPrice:u,nofeePrice:f},i===g_ActiveInventory.selectedItem&&reloadDes())},error:function(){}})}if(!i.marketable){t&&e==f&&t(i);return}if(i.lowestPrice){if(PriceQueue.GenPriceDescription(i),t&&e==f){t(i);return}}else PriceQueue.GetPrice({method:"GET",url:f,success:function(n){n.success&&(cachePrices[f].lowestPrice=i.lowestPrice=n.lowest_price,cachePrices[f].nofeePrice=i.nofeePrice=n.median_price,n.volume&&(cachePrices[f].volume=i.volume=n.volume),n.providerName&&(cachePrices[f].providerName=i.providerName=n.providerName),PriceQueue.GenPriceDescription(i),e==f&&(i.lowestPriceW=n.lowest_price,i.nofeePriceW=n.median_price,i.providerName=n.providerName),i===g_ActiveInventory.selectedItem&&(reloadDes(),$J(".dd_price").find("a").attr("href",p)),t&&e==f&&t(i))}});i.lowestPriceW?t&&t(i):e!=f&&PriceQueue.GetPrice({method:"GET",url:e,success:function(n){n.success&&(cachePrices[e].lowestPrice=i.lowestPriceW=n.lowest_price,cachePrices[e].nofeePrice=i.nofeePriceW=n.median_price,n.volume&&(cachePrices[f].volume=i.volume=n.volume),t&&t(i))}})}},selectSimilar=function(n){selectmode||$J("#Lnk_Sellmulti").trigger("click");$J(".inventory_ctn:visible .inventory_page .item").each(function(){this.rgItem.marketable&&this.rgItem.classid==n&&(g_ActiveInventory.LoadItemImage(this),$J(this).addClass("selectedSell"))});var t=$J(".selectedSell").length;return t>0&&($J("#Lnk_ShowSellMulti .item_market_action_button_contents").html(t>1?SIHLang.sellnitem.replace("$1",t):SIHLang.sell1item),$J("#Lnk_ShowSellMulti").show(),g_ActiveInventory.appid==753&&($J("#Lnk_TurnIntoGems").show(),$J("#Lnk_SendGifts").show())),!1},setGemPrice=function(n,t,i,r){var u=window.location.protocol+"//steamcommunity.com/market/priceoverview/?appid=570&country=VN&currency=1&market_hash_name="+t;PriceQueue.GetPrice({method:"GET",url:u,success:function(i){var u=0,f;i.success&&(u=i.lowest_price,f=/([\d\.,]+)/.exec(u.replace(/\&#\d+;/g,"").replace(" p&#1091;&#1073;.","").replace(/,/g,"."))[1],n.extimatePrice[t]=f,r(n))},error:function(){}})},imgRex=/<img.*?src="([^"]+?)"[^>]*>/g,imgRex2=/background-image: url\(([^\)]+?)\)/g,ShowQueue=function(n){var u,i;$J("div.queue-container").remove();var f=$J(".selectedSell"),t=$J('<div class="queue-container">'),r=$J('<div class="queue-right-panel">');if(t.append(r),u=$J('<div class="scrollbar-inner">'),t.append(u),f.sort(function(n,t){var i=n.rgItem,r=t.rgItem;return i.market_hash_name==r.market_hash_name?0:i.market_hash_name<r.market_hash_name?-1:1}),f.each(function(){var t=null,r,f,o,e,i;if(!(t=this.rgItem)||!t.marketable&&!n||n=="1"&&(t.appid!=753||t.contextid!=6))return $J(this).removeClass("selectedSell"),!0;if(r=$J('<div class="queue-item-container" data-id="'+t.id+'">'),r.append('<a href="#" class="queue-item-remove" title="Remove from queue">&#x2212;<\/a>'),f="",t.fraudwarnings&&(f+='<img src="http://steamcommunity-a.akamaihd.net/public/images/sharedfiles/icons/icon_warning.png" height="16" />'),t.descriptions&&t.descriptions.length)for(o=null,e=0;e<t.descriptions.length;e++)while((o=imgRex.exec(t.descriptions[e].value))!=null||(o=imgRex2.exec(t.descriptions[e].value))!=null)f+='<img src="'+o[1]+'" height="16"/>';f.length>0&&r.append('<div class="item-bagde">'+f+"<\/div>");i=$J('<div class="queue-item">');i.css("border-color","#"+t.name_color);$J(this).hasClass("item-equipped")&&i.addClass("item-equipped");$J(this).hasClass("item-in-trade")&&i.addClass("item-in-trade");i.append($J(this).find("img").clone());r[0].rgItem=t;r.append(i);AddItemHoverToElement(i[0],t);u.append(r)}),$J(".selectedSell").length==0)return n=="1"?GrindDialog.Dismiss():SellItemDialog.Dismiss(),$J("div.queue-container").remove(),$J("#Lnk_ShowSellMulti").hide(),$J("#Lnk_TurnIntoGems").hide(),$J("#Lnk_SendGifts").hide(),!1;if(r.append('<div class="queue-panel"><fieldset><div class="queue-item-count">'+$J(".selectedSell").length+'<\/div><div class="queue-total-price"><span class="with-fee" title="Total buyer will pay"><\/span><span class="without-fee" title="Total will recieve"><\/span><\/div><\/fieldset><\/div>'),r.append('<div class="queue-remove-panel queue-panel"><fieldset><legend>'+SIHLang.queue.removeitem+'<\/legend><input type="text" class="num" id="txt_remove_queue" /><a href="#" id="bt_lower">'+SIHLang.queue.removelower+'<\/a><a href="#" id="bt_higher">'+SIHLang.queue.removehigher+'<\/a><a href="#" id="bt_intrade">'+SIHLang.queue.removeintrade+'<\/a><a href="#" id="bt_removeequipped">'+SIHLang.queue.removeequipped+"<\/a><\/fieldset><\/div>"),r.append('<div class="queue-sort-panel queue-panel"><fieldset><legend>'+SIHLang.sort.sortitem+'<\/legend><a href="#" id="bt_sort_price">'+SIHLang.sort.price+' <span class="market_sort_arrow"><\/span><\/a><\/fieldset><\/div>'),t.find("#bt_lower, #bt_higher").click(function(){var n=$J(this).attr("id")==="bt_lower"?-1:1,t=parseFloat($J("#txt_remove_queue").val());return isNaN(t)?!1:($J(".queue-item-container").each(function(){var i=this.rgItem,r;i&&i.lowestPriceW&&(r=parseFloat(getNumber(i.lowestPriceW)),r*n>t*n&&$J(this).find(".queue-item-remove").trigger("click"))}),!1)}),t.find("#bt_intrade").click(function(){return $J(".queue-item-container").each(function(){var n=this.rgItem;$J(this).find(".item-in-trade").length&&$J(this).find(".queue-item-remove").trigger("click")}),!1}),t.find("#bt_removeequipped").click(function(){return $J(".queue-item-container").each(function(){var n=this.rgItem;$J(this).find(".item-equipped").length&&$J(this).find(".queue-item-remove").trigger("click")}),!1}),t.find("#bt_sort_price").click(function(){var n,r,u,i;return isSorting?!1:(isSorting=!0,n=1,$this=$J(this),$this.find(".market_sort_arrow").is(':contains("▲")')?(n=-1,$this.find(".market_sort_arrow").text("▼")):$this.find(".market_sort_arrow").text("▲"),r=t.find("div:has(>.queue-item-container)"),u=r.children(".queue-item-container"),u.sort(function(t,i){var f=t.rgItem,e=i.rgItem,r,u;return f?e?(r=typeof f.lowestPriceW=="undefined"?0:parseFloat(getNumber(f.lowestPriceW)),u=typeof e.lowestPriceW=="undefined"?0:parseFloat(getNumber(e.lowestPriceW)),r==u&&(r=f.market_hash_name,u=e.market_hash_name),r>u)?1*n:r<u?-1*n:0:n*-1:n}),u.detach().appendTo(r),i=$J(".queue-item-container")[0].rgItem,g_ActiveInventory.SelectItem(null,i.element,i),g_ActiveInventory.EnsurePageActiveForItem(i.element),UpdateSellItem(i),isSorting=!1,!1)}),$J("body").append(t),$J(u).scrollbar(),qTotalPrice=0,qTotalBuyerPrice=0,n)GetQueueGoo();else{if(i=$J(".queue-item-container:visible")[0].rgItem,g_ActiveInventory.SelectItem(null,i.element,i),g_ActiveInventory.EnsurePageActiveForItem(i.element),!UpdateSellItem(i))return;GetQueuePrice();PriceQueue.UpdateHandler=ContinueListing}},qTimer=null,qTotalPrice=0,qTotalBuyerPrice=0,isSorting=!1,GetQueuePrice=function(){var n,t,i;for(isSorting=!1,qTimer&&window.clearTimeout(qTimer),n=$J(".queue-item-container:not(:has(>span.price))"),t=0;t<n.length;t++)i=n[t].rgItem,getLowestPriceHandler(i,function(t){var h,c,f,o,r,l,e;if(t&&t.lowestPriceW){var a=getNumber(t.lowestPriceW),u=GetPriceValueAsInt(a),i=u,s=null;u>0&&i==parseInt(i)&&(h=typeof SellItemDialog.m_item.market_fee!="undefined"?SellItemDialog.m_item.market_fee:g_rgWalletInfo.wallet_publisher_fee_percent_default,c=CalculateFeeAmount(i,h),i=i-c.fees,s=v_currencyformat(i,GetCurrencyCode(g_rgWalletInfo.wallet_currency)));f=$J('<span class="price"><\/span>');f.html(t.lowestPriceW);f.attr("title",s);t.buyerPrice=u;t.sellerPrice=i;e=$J('.queue-item-container[data-id="'+t.id+'"]');e.append(f);qTotalPrice+=u;qTotalBuyerPrice+=i;$J(".queue-total-price .with-fee").html(v_currencyformat(qTotalPrice,GetCurrencyCode(g_rgWalletInfo.wallet_currency)));$J(".queue-total-price .without-fee").html(v_currencyformat(qTotalBuyerPrice,GetCurrencyCode(g_rgWalletInfo.wallet_currency)))}else{if(o=t,$J("#item"+o.appid+"_"+o.contextid+"_"+$J(n[0]).data().id+".selectedSell").removeClass("selectedSell"),r=$J(".inventory_page .selectedSell").length,r<=0)return SellItemDialog.Dismiss(),$J("#Lnk_ShowSellMulti").hide(),$J("#Lnk_TurnIntoGems").hide(),$J("#Lnk_SendGifts").hide(),!1;l=$J(".queue-item-container")[0].rgItem;UpdateSellItem(l);$J(".queue-item-count").html(r);$J("#Lnk_ShowSellMulti .item_market_action_button_contents").html(r>1?SIHLang.sellnitem.replace("$1",r):SIHLang.sell1item);e=$J('.queue-item-container[data-id="'+t.id+'"]');e.remove()}})},GetQueueGoo=function(){var t;if(isSorting=!1,qTimer&&window.clearTimeout(qTimer),t=$J(".queue-item-container:not(:has(>span.price))"),t.length>0){var n=t[0].rgItem,i={sessionid:g_sessionID,appid:n.app_data.appid,assetid:n.id,contextid:n.contextid},r=g_strProfileURL+"/ajaxgetgoovalue/";$J.get(r,i).done(function(i){var o=$J(i.strHTML),s=i.strTitle,f,e,r,u;if(n.goo_value=i.goo_value,n.goo_value>0)f=$J('<span class="price"><\/span>'),f.html(n.goo_value),f.attr("title",n.goo_value),$J(t[0]).append(f),qTotalPrice+=parseInt(n.goo_value),$J(".queue-total-price .with-fee").html(qTotalPrice),$J(".queue-total-price .without-fee").html("gems");else{if(e=t[0].rgItem,$J("#item"+e.appid+"_"+e.contextid+"_"+$J(t[0]).data().id+".selectedSell").removeClass("selectedSell"),r=$J(".inventory_page .selectedSell").length,r<=0)return GrindDialog.Dismiss(),$J("#Lnk_ShowSellMulti").hide(),$J("#Lnk_TurnIntoGems").hide(),$J("#Lnk_SendGifts").hide(),!1;u=$J(".queue-item-container")[0].rgItem;g_ActiveInventory.SelectItem(null,u.element,u);g_ActiveInventory.EnsurePageActiveForItem(u.element);UpdateSellItem(u);$J(".queue-item-count").html(r);$J("#Lnk_ShowSellMulti .item_market_action_button_contents").html(r>1?SIHLang.sellnitem.replace("$1",r):SIHLang.sell1item);$J(t[0]).remove()}window.setTimeout("GetQueueGoo();",50)})}},GrindNextItem=function(){var t,n,i;$J(".selectedSell").length==0?(GrindDialog.Dismiss(),$J("#Lnk_ShowSellMulti").hide(),$J("#Lnk_TurnIntoGems").hide(),$J("#Lnk_SendGifts").hide()):$J(".selectedSell").length>0&&!GrindDialog.m_bIsDismissed?(t=$J(".selectedSell").length,$J(".queue-item-count").html(t),$J("#Lnk_ShowSellMulti .item_market_action_button_contents").html(t>1?SIHLang.sellnitem.replace("$1",t):SIHLang.sell1item),n=$J(".queue-item-container:visible")[0].rgItem,g_ActiveInventory.SelectItem(null,n.element,n),g_ActiveInventory.EnsurePageActiveForItem(n.element),n.goo_value&&(i={sessionid:g_sessionID,appid:n.app_data.appid,assetid:n.id,contextid:n.contextid,goo_value_expected:n.goo_value},strActionURL=g_strProfileURL+"/ajaxgrindintogoo/",$J.post(strActionURL,i).done(function(){g_ActiveInventory.selectedItem.marketable=0;$J(g_ActiveInventory.selectedItem.element).removeClass("selectedSell");$J(g_ActiveInventory.selectedItem.element).css("opacity","0.3");$J("div.queue-item-container[data-id="+g_ActiveInventory.selectedItem.id+"]").hide(200,function(){setTimeout("GrindNextItem()",100)})}).fail(function(){ShowAlertDialog(strDialogTitle,"There was an error communicating with the network. Please try again later.")}))):GrindDialog.Dismiss()},ModifyMarketActions=function(){typeof fastdelta=="undefined"&&(window.fastdelta=-.01);typeof delaylistings=="undefined"&&(window.delaylistings=200);typeof quicksellbuttons=="undefined"&&(window.quicksellbuttons=!0);typeof buysetbuttons=="undefined"&&(window.buysetbuttons=!0);PopulateMarketActions=function(n,t){var r,i,h,u,c;if(n.update(""),!t.marketable||t.is_currency&&CurrencyIsWalletFunds(t)){n.hide();return}if(typeof g_bViewingOwnProfile!="undefined"&&g_bViewingOwnProfile){var e=typeof t.market_hash_name!="undefined"?t.market_hash_name:t.market_name||t.name,f=new Element("div"),o=new Element("div",{style:"height: 24px;"}),s=new Element("a",{href:window.location.protocol+"//steamcommunity.com/market/listings/"+t.appid+"/"+encodeURIComponent(e)});s.update("View in Community Market");o.appendChild(s);f.appendChild(o);window.hidedefaultprice||(r=new Element("div",{style:"min-height: 3em; margin-left: 1em;"}),r.update('<img src="'+window.location.protocol+'//steamcommunity-a.akamaihd.net/public/images/login/throbber.gif" alt="Working...">'),f.appendChild(r),i=null,h=window.location.protocol+"//steamcommunity.com/market/priceoverview/?appid="+t.appid+"&country="+g_strCountryCode+"&currency="+(typeof g_rgWalletInfo!="undefined"?g_rgWalletInfo.wallet_currency:1)+"&market_hash_name="+encodeURIComponent(e),PriceQueue.GetPrice({method:"GET",url:h,insert:!0,success:function(u){var e,h,l,a,s;if(u.success){if(e="",u.lowest_price){e+="Starting at: "+u.lowest_price+"<br>";var v=getNumber(u.lowest_price),o=GetPriceValueAsInt(v),f=o,c=null;o>0&&f==parseInt(f)&&(h=typeof t.market_fee!="undefined"?t.market_fee:g_rgWalletInfo.wallet_publisher_fee_percent_default,l=CalculateFeeAmount(f,h),f=f-l.fees+100*window.fastdelta,f<=0&&(f=1),a=CalculateAmountToSendForDesiredReceivedAmount(f,h),o=a.amount,c=v_currencyformat(o,GetCurrencyCode(g_rgWalletInfo.wallet_currency)));quicksellbuttons&&(i=CreateMarketActionButton("green","#",SIHLang.quicksell.replace("$1",c)),$J(i).css({marginLeft:"12px"}),console.log("Quick sell data ",{sessionid:g_sessionID,appid:t.appid,contextid:t.contextid,assetid:t.id,amount:1,price:f}),$J(i).click(function(){return r.update('<img src="'+window.location.protocol+'//steamcommunity-a.akamaihd.net/public/images/login/throbber.gif" alt="Working...">'),SellItemDialog.m_item=t,$J.ajax({url:"https://steamcommunity.com/market/sellitem/",type:"POST",data:{sessionid:g_sessionID,appid:t.appid,contextid:t.contextid,assetid:t.id,amount:1,price:f},crossDomain:!0,xhrFields:{withCredentials:!0}}).done(function(i){SellItemDialog.OnSuccess({responseJSON:i});$J("#Ck_NoReload").is(":checked")&&PopulateMarketActions(n,t)}).fail(function(n){r.update("Error...");var t=$J.parseJSON(n.responseText);SellItemDialog.OnFailure({responseJSON:t})}),!1}),t==g_ActiveInventory.selectedItem&&n.appendChild(i))}else e+="There are no listings currently available for this item.<br>";u.volume&&(s="%1$s sold in the last 24 hours",s=s.replace("%1$s",u.volume),e+="Volume: "+s+"<br>");r.update(e)}}}));n.appendChild(f);u=CreateMarketActionButton("green","#","Sell");$J(u).click(function(){if($J(".selectedSell").length>0){$J("#div_multi input[type=checkbox]").prop("disabled",!1);$J("#div_multi").show();$J("#ck_autoaccept").prop("checked",!0);var n=$J(".selectedSell")[0].rgItem;SellItemDialog.Show(n);ShowQueue()}else SellCurrentSelection();return!1});n.appendChild(u);window.setTimeout(function(){i&&t==g_ActiveInventory.selectedItem&&n.appendChild(i)},50);g_bMarketAllowed||(c=$("market_tip_noaccess"),InstallHoverTooltip(u,c))}else{n.hide();return}n.show()}},ModifyDescriptionFunction=function(){PopulateDescriptions=function(n,t){var l,i,o,u,g,r,f,w,s,e,nt,a,b,k;if(n.update(""),!t||!t.length){n.hide();return}n.show();var c=null,d=null,y=0,p=[];for(l=0;l<t.length;l++)if(i=t[l],i.value){if(o=v_trim(i.value.replace(/\[date\](\d*)\[\/date\]/g,function(n,t){var i=new Date(t*1e3);return i.toLocaleString()})),u=new Element("div",{"class":"descriptor"}),i.color&&(u.style.color="#"+i.color),o.length==0)u.update("&nbsp;");else if(i.type=="image")g=new Element("img",{src:v_trim(i.value)}),u.appendChild(g);else if(i.type=="html"){if(r=o,!i.app_data||i.app_data.limited||i.app_data.is_itemset_name||(f={},i.app_data.price&&(w=getNumber(i.app_data.price),f.price=w,f.link=window.location.protocol+"//steamcommunity.com/market/listings/"+g_ActiveInventory.appid+"/"+encodeURIComponent(i.app_data.market_hash_name),f.name=o,f.market_hash_name=i.app_data.market_hash_name,y+=parseFloat(w),r='<a href="'+window.location.protocol+"//steamcommunity.com/market/listings/"+g_ActiveInventory.appid+"/"+encodeURIComponent(i.app_data.market_hash_name)+'" target="_blank" style="color:inherit" class="whiteLink">'+r+" ("+i.app_data.price+")<\/a>"),i.isinset&&(i.app_data.owned?r="&#10003; "+r:(r="&#10007;&nbsp; "+r,i.app_data.price&&p.push(f)))),i.isstickers){for(r=r.substr(0,r.indexOf("<br>Sticker:")+12),s=0;s<i.stickers.length;s++)e=i.stickers[s],s&&(r+=", "),r+=e.name,e.prices&&e.prices.lowestPrice&&(r+=' - <span title="'+e.prices.nofeePrice+'" style="color: #FF0">'+e.prices.lowestPrice+"<\/span>");r+="<\/center><\/div>"}if(i.insgems&&i.insgems.length){for(i.orgvalue?i.value=i.orgvalue:i.orgvalue=i.value,nt=/<span style="font-size: 12px">([\w\s]+)<\/span>/gi,a=0;a<i.insgems.length;a++){var v=nt.exec(i.orgvalue),h=i.insgems[a],tt=window.location.protocol+"//steamcommunity.com/market/listings/570/"+h.name;i.value=h.lowestPrice?i.value.replace(v[0],'<a href="'+tt+'" target="_blank" title="'+h.name+'">'+v[1]+' <span style="color: #FF0">('+h.lowestPrice+")<\/span><\/a>"):i.value.replace(v[0],'<a href="'+tt+'" target="_blank" title="'+h.name+'">'+v[1]+"<\/a>")}r=i.value}u.update(r)}else u.update(o.escapeHTML().replace(/\n/g,"<br>"));i.app_data&&i.app_data.is_itemset_name&&(c=u,d=i.value);i.label&&(b=new Element("span",{"class":"descriptor_label"}),b.update(i.label+": "),u.insert({top:b}));n.appendChild(u)}c&&y>0&&(c.update(d+" ("+formatNumber(y)+")"),p.length>0&&g_bViewingOwnProfile&&g_bMarketAllowed&&buysetbuttons&&!n.id.startsWith("hover")&&(k=$J('<a href="#" class="buy-set">'+SIHLang.buymissing+"<\/a>"),k.click(function(){return BuySetDialog.Show(p),!1}),$J(c).append("<br />").append(k)))};var n=PopulateTags;PopulateTags=function(t,i,r){if(n(t,i,r),r&&r.length>0){var u=$J('<a href="javascript:void(0)">Gen. expression<\/a>');u.click(function(){GenExpDialog.Show(r)});$J(i).append("<br />").append(u)}}},ModifyItemDisplay=function(){UserYou.OnLoadInventoryComplete=function(n,t,i){var f,h,e,o,u,s,r;if(this.cLoadsInFlight--,n.responseJSON&&n.responseJSON.success){f=new CInventory(this,t,i,n.responseJSON.rgInventory,n.responseJSON.rgCurrency);this.addInventory(f);h=f.getInventoryElement();h.hide();$("inventories").insert(h);e=f.getTagContainer();o=$("filter_options");o&&e&&(e.hide(),o.insert(e),o.addClassName("filter_collapsed"));u={};for(s in n.responseJSON.rgInventory)r=n.responseJSON.rgInventory[s],u[r.classid]?u[r.classid]++:u[r.classid]=1;for(s in n.responseJSON.rgInventory)r=n.responseJSON.rgInventory[s],u[r.classid]&&u[r.classid]>1&&r.descriptions&&(r.descriptions[0].iscount||r.descriptions.unshift({iscount:!0,type:"html",value:'Number owned: <i style="color: rgb(153, 204, 255); font-size: 16px">'+u[r.classid]+"<\/i>"+(g_bViewingOwnProfile?' (<a href="javascript:selectSimilar('+r.classid+')">Select all<\/a>)':"")}));t==570?$J.ajax({url:"https://api.steampowered.com/IEconItems_570/GetPlayerItems/v0001/",data:{SteamID:this.strSteamId,key:apiKey},success:function(n){apiItems[this.strSteamId]||(apiItems[this.strSteamId]={});n&&n.result&&n.result.status==1&&(apiItems[this.strSteamId][t]=n.result.items,$J.each(apiItems[this.strSteamId][t],function(n,t){var i=$J("div.item[id=item570_2_"+t.id+"]");t.equipped&&(i.addClass("item-equipped"),i.each(function(){this.rgItem.equipped=!0}));i.each(function(){this.rgItem.defindex=t.defindex})}))},error:function(){}}):t==730&&(numberOfRetries=0,GetCSGOItems())}else{this.OnInventoryLoadFailed(n,t,i);return}this.ShowInventoryIfActive(t,i);$J(window).trigger("resize.DynamicInventorySizing");$J.each(itemsInTrades,function(){var n=this,i;n.appid==t&&(i=$J("div.item[id=item"+n.appid+"_"+n.context+"_"+n.id+"]"),i.addClass("item-in-trade"))});g_bIsTrading&&RedrawCurrentTradeStatus()}},numberOfRetries=0,maxRetries=10,dopplerPhaseName={421:"Phase 4",420:"Phase 3",419:"Phase 2",418:"Phase 1",417:"Black Pearl",416:"Sapphire",415:"Ruby"},GetCSGOItems=function(){$J.ajax({url:"https://api.steampowered.com/IEconItems_730/GetPlayerItems/v0001/",data:{SteamID:UserYou.strSteamId,key:apiKey},success:function(n){apiItems[this.strSteamId]||(apiItems[this.strSteamId]={});n&&n.result&&n.result.status==1&&(apiItems[this.strSteamId][730]=n.result.items,$J.each(apiItems[this.strSteamId][730],function(n,t){var e=$J("div.item[id=item730_2_"+t.id+"]"),r,u,i,f;if(t.attributes)for(r=-1,u=-1,i=0;i<t.attributes.length;i++)t.attributes[i].defindex==8&&(r=t.attributes[i].float_value),t.attributes[i].defindex==6&&(u=t.attributes[i].float_value);r>=0&&(f="",u>0&&(f=dopplerPhaseName[u]||""),e.each(function(){this.rgItem.float_value||(this.rgItem.float_value=r,this.rgItem.dopplerPhase=f,this.rgItem.descriptions&&(this.rgItem.descriptions=this.rgItem.descriptions.clone(),this.rgItem.descriptions.unshift({type:"html",value:"Float value: <strong style='color: #FF0'>"+r.toFixed(4)+"<\/strong> "+f,floatvalue:!0})))}))}))},error:function(){(numberOfRetries++,console.log("Retry",numberOfRetries),numberOfRetries>=maxRetries)||window.setTimeout(GetCSGOItems,1e3+200*numberOfRetries)}})},ModifyGamesTabs=function(){var r=$J(".games_list_tabs a.games_list_tab").length,i=$J(".games_list_tabs a.games_list_tab").index($J(".games_list_tabs .active"));if(r>10){var n=$J('<div class="holder">'),t=$J('<div class="tab-controls">'),u=$J(".games_list_tabs").children().remove();n.append(u);t.append('<a href="#" class="tab-up">up<\/a><a href="#" class="tab-down">down<\/a>');t.find(".tab-up").click(function(){n.stop();var t=parseInt(n.scrollTop()/56)*56;return n.animate({scrollTop:t-112},500),!1});t.find(".tab-down").click(function(){n.stop();var t=parseInt(n.scrollTop()/56)*56;return n.animate({scrollTop:t+112},500),!1});$J(".games_list_tabs").append(n);$J(".games_list_tabs").append(t);i>5&&n.animate({scrollTop:i*56},500)}},UpdateSellItem=function(n){var t,u,f,r,e,i;if(SellItemDialog.m_item=n,$J("#ck_autoadjust").is(":checked")){if(!n.sellerPrice)return SellItemDialog.b_isInterupted=!0,!1;t=CalculateSellingPrice(n.sellerPrice);t<=0&&(t=n.sellerPrice);u=typeof SellItemDialog.m_item.market_fee!="undefined"?SellItemDialog.m_item.market_fee:g_rgWalletInfo.wallet_publisher_fee_percent_default;f=CalculateAmountToSendForDesiredReceivedAmount(t,u);$J("#market_sell_currency_input").val(v_currencyformat(t,GetCurrencyCode(g_rgWalletInfo.wallet_currency)));$J("#market_sell_buyercurrency_input").val(v_currencyformat(f.amount,GetCurrencyCode(g_rgWalletInfo.wallet_currency)));SellItemDialog.m_nConfirmedPrice=t}return r=$("market_sell_dialog_item"),n.name_color&&(r.style.borderColor="#"+n.name_color),n.background_color&&(r.style.backgroundColor="#"+n.background_color),e=$("market_sell_dialog_item_img"),e.src=n.is_stackable?ImageURL(n.icon_url,"96f","58f"):ImageURL(n.icon_url,"96f","96f"),SellItemDialog.m_strName=GetNameForItem(n),$("market_sell_dialog_item_name").update(SellItemDialog.m_strName),$("market_sell_quantity_available_amt").update(n.amount),$("market_sell_dialog_item_name").style.color=n.name_color?"#"+n.name_color:"",n.appid&&g_rgAppContextData[n.appid]?(i=g_rgAppContextData[n.appid],$("market_sell_dialog_game_icon").src=i.icon,$("market_sell_dialog_game_icon").alt=i.name,$("market_sell_dialog_game_name").update(i.name),$("market_sell_dialog_item_type").update(n.type),$("market_sell_dialog_game_info").show()):$("market_sell_dialog_game_info").hide(),n.amount==1?($("market_sell_quantity_input").disable(),$("market_sell_quantity_label").hide(),$("market_sell_quantity_input").hide(),$("market_sell_quantity_available").hide()):($("market_sell_quantity_label").show(),$("market_sell_quantity_input").show(),$("market_sell_quantity_available").show()),!0},ModifySellingFuntions=function(){SellItemDialog.orgOnSuccess=SellItemDialog.OnSuccess;SellItemDialog.orgOnFailure=SellItemDialog.OnFailure;SellItemDialog.newOnSuccess=function(n){this.m_bWaitingForUserToConfirm=!1;this.m_bWaitingOnServer=!1;n.responseJSON?($("market_headertip_itemsold_itemname").update(this.m_strName),$("market_headertip_itemsold_itemname").style.color=this.m_item.name_color?"#"+this.m_item.name_color:"",g_ActiveInventory.selectedItem.marketable=0,$J(g_ActiveInventory.selectedItem.element).removeClass("selectedSell"),$J(g_ActiveInventory.selectedItem.element).css("opacity","0.3"),$J("div.queue-item-container[data-id="+g_ActiveInventory.selectedItem.id+"]").hide(200,function(){var t,n;if($J(".queue-item-container:visible").length>0){if(t=$J(".queue-item-container:visible").length,$J(".queue-item-count").html(t),$J("#Lnk_ShowSellMulti .item_market_action_button_contents").html(t>1?SIHLang.sellnitem.replace("$1",t):SIHLang.sell1item),n=$J(".queue-item-container:visible")[0].rgItem,g_ActiveInventory.SelectItem(null,n.element,n),g_ActiveInventory.EnsurePageActiveForItem(n.element),!UpdateSellItem(n))return;$J("#ck_autoaccept").is(":checked")?$J("#market_sell_dialog").is(":visible")&&window.setTimeout("SellItemDialog.OnConfirmationAccept({stop:function(){}});",window.delaylistings):($("market_sell_dialog_ok").show(),$("market_sell_dialog_ok").setOpacity("0"),$("market_sell_dialog_ok").fade({duration:.25,from:0,to:1}),$("market_sell_dialog_back").show(),$("market_sell_dialog_back").setOpacity("0"),$("market_sell_dialog_back").fade({duration:.25,from:0,to:1}),$("market_sell_dialog_throbber").fade({duration:.25}))}}),$J(".selectedSell").length<=0&&(SellItemDialog.Dismiss(),$J(".item.selectedSell").removeClass("selectedSell"),$J(".similar-item").removeClass("similar-item"),$J("#Lnk_Sellmulti .item_market_action_button_contents").html(SIHLang.sellmulti),$J("#Lnk_ShowSellMulti").hide(),$J("#Lnk_TurnIntoGems").hide(),$J("#Lnk_SendGifts").hide(),selectmode=!1,SellItemDialog.OnFailure=SellItemDialog.orgOnFailure,$J(".item_market_actions").html(""))):this.DisplayError("There was a problem listing your item. Refresh the page and try again.")};SellItemDialog.orgShow=SellItemDialog.Show;SellItemDialog.Show=function(n){SellItemDialog.orgShow(n);SellItemDialog.m_modal.m_fnOnDismiss=function(){$J("div.queue-container").remove();$J("#div_multi").hide();$J("#ck_autoaccept,#ck_autoadjust").prop("checked",!1);$J("#Txt_adjust").prop("disabled",!1);HideHover()}};SellItemDialog.newOnFailure=function(n){this.m_bWaitingOnServer=!1;var t=Effect.Queues.get("global");t.each(function(n){n.cancel()});$("market_sell_dialog_ok").show();$("market_sell_dialog_ok").setOpacity("0");$("market_sell_dialog_ok").fade({duration:.25,from:0,to:1});$("market_sell_dialog_back").show();$("market_sell_dialog_back").setOpacity("0");$("market_sell_dialog_back").fade({duration:.25,from:0,to:1});$("market_sell_dialog_throbber").fade({duration:.25});n.responseJSON&&n.responseJSON.message?(this.DisplayError(n.responseJSON.message),n.responseJSON.message!="The item specified is no longer in your inventory or is not allowed to be traded on the Community Market."?$J("#ck_autoaccept").is(":checked")&&n.responseJSON.message.indexOf("exceed the maximum wallet balance")<0&&window.setTimeout("SellItemDialog.OnConfirmationAccept({stop:function(){}});",200):($J(g_ActiveInventory.selectedItem.element).removeClass("selectedSell"),$J(g_ActiveInventory.selectedItem.element).css("opacity","0.3"))):this.DisplayError("There was a problem listing your item. Refresh the page and try again.")};$J("#filter_options").after('<div><label for="Ck_NoReload" style="margin-left: 12px; display: none"><input type="checkbox" name="Ck_NoReload" checked="checked" id="Ck_NoReload" /><span data-lang="noreload">No inventory reloading when sell item<\/span><\/label><a href="#" id="Lnk_Reload" accesskey="r" style="margin-left: 12px" class="item_market_action_button item_market_action_button_green"><span class="item_market_action_button_edge item_market_action_button_left"><\/span><span class="item_market_action_button_contents" data-lang="reloadinvent">Reload inventory (alt + r)<\/span><span class="item_market_action_button_edge item_market_action_button_right"><\/span><span class="item_market_action_button_preload"><\/span><\/a><a href="#" id="Lnk_Sellmulti" style="margin-left: 12px" class="item_market_action_button item_market_action_button_green" title="Tips: User shift click to select a range of items"><span class="item_market_action_button_edge item_market_action_button_left"><\/span><span class="item_market_action_button_contents" data-lang="sellmulti">Select items<\/span><span class="item_market_action_button_edge item_market_action_button_right"><\/span><span class="item_market_action_button_preload"><\/span><\/a><a href="#" id="Lnk_ShowSellMulti" style="display:none; margin-left: 12px" title="Tips: User shift click to select a range of items" class="item_market_action_button item_market_action_button_green"><span class="item_market_action_button_edge item_market_action_button_left"><\/span><span class="item_market_action_button_contents">Sell<\/span><span class="item_market_action_button_edge item_market_action_button_right"><\/span><span class="item_market_action_button_preload"><\/span><\/a><a href="#" id="Lnk_TurnIntoGems" style="display:none; margin-left: 12px" class="item_market_action_button item_market_action_button_green"><span class="item_market_action_button_edge item_market_action_button_left"><\/span><span class="item_market_action_button_contents">Turn into gems<\/span><span class="item_market_action_button_edge item_market_action_button_right"><\/span><span class="item_market_action_button_preload"><\/span><\/a><a href="#" id="Lnk_SendGifts" style="display:none; margin-left: 12px" class="item_market_action_button item_market_action_button_green"><span class="item_market_action_button_edge item_market_action_button_left"><\/span><span class="item_market_action_button_contents">Send gifts<\/span><span class="item_market_action_button_edge item_market_action_button_right"><\/span><span class="item_market_action_button_preload"><\/span><\/a> <br /><\/div>');$J("#market_sell_dialog_accept_ssa_label").after('<div id="div_multi" style="display:none"><label for="ck_autoaccept"><input type="checkbox" id="ck_autoaccept"> <span data-lang="autoaccept">auto accept<\/span><\/label> <label for="ck_autoadjust"><input type="checkbox" id="ck_autoadjust"> <span data-lang="autoadjust">auto adjust price<\/span><\/label><input type="number" step="0.01" title="adjust amount" id="Txt_adjust" value="0" /><select id="cb_adtype"><option value="1">Value<\/option><option value="2">Percentage<\/option><\/select><\/div>');$J("#market_sell_dialog_accept").click(function(){$J("#div_multi input[type=checkbox],#Txt_adjust").prop("disabled",!0)});SellItemDialog.OnSuccess=SellItemDialog.newOnSuccess;$J("#Ck_NoReload").click(function(){SellItemDialog.OnSuccess=$J(this).is(":checked")?SellItemDialog.newOnSuccess:SellItemDialog.orgOnSuccess});$J("#ck_autoadjust").click(function(){var t=g_ActiveInventory.selectedItem,n=CalculateSellingPrice(t.sellerPrice),i,r;n<=0&&(n=t.sellerPrice);i=typeof SellItemDialog.m_item.market_fee!="undefined"?SellItemDialog.m_item.market_fee:g_rgWalletInfo.wallet_publisher_fee_percent_default;r=CalculateAmountToSendForDesiredReceivedAmount(n,i);$J("#market_sell_currency_input").val(v_currencyformat(n,GetCurrencyCode(g_rgWalletInfo.wallet_currency)));$J("#market_sell_buyercurrency_input").val(v_currencyformat(r.amount,GetCurrencyCode(g_rgWalletInfo.wallet_currency)));$J(this).is(":checked")?$J("#market_sell_currency_input,#market_sell_buyercurrency_input").prop("disabled",!0):$J("#market_sell_currency_input,#market_sell_buyercurrency_input").prop("disabled",!1)});$J("#Lnk_Reload").click(function(){var n=g_ActiveInventory.selectedItem;return UserYou.ReloadInventory(n.appid,n.contextid),cachePrices={},selectmode=!1,$J("#Lnk_Sellmulti .item_market_action_button_contents").html(SIHLang.sellmulti),$J("#Lnk_ShowSellMulti").hide(),$J("#Lnk_TurnIntoGems").hide(),$J("#Lnk_SendGifts").hide(),SellItemDialog.OnFailure=SellItemDialog.orgOnFailure,$J(".item.selectedSell").removeClass("selectedSell"),$J(".similar-item").removeClass("similar-item"),!1});$J("#Lnk_Sellmulti").click(function(){return selectmode=!selectmode,selectmode?($J("#Lnk_Sellmulti .item_market_action_button_contents").html(SIHLang.cancel),$J("#Ck_NoReload").prop("checked",!0),SellItemDialog.OnSuccess=SellItemDialog.newOnSuccess,SellItemDialog.OnFailure=SellItemDialog.newOnFailure):($J("#Lnk_Sellmulti .item_market_action_button_contents").html(SIHLang.sellmulti),$J("#Lnk_ShowSellMulti").hide(),$J("#Lnk_TurnIntoGems").hide(),$J("#Lnk_SendGifts").hide(),SellItemDialog.OnFailure=SellItemDialog.orgOnFailure),$J(".item.selectedSell").removeClass("selectedSell"),$J(".similar-item").removeClass("similar-item"),!1});$J("#Lnk_ShowSellMulti").click(function(){if($J(".selectedSell").length>0){$J("#div_multi input[type=checkbox]").prop("disabled",!1);$J("#div_multi").show();$J("#ck_autoaccept").prop("checked",!0);var n=$J(".selectedSell")[0].rgItem;g_ActiveInventory.SelectItem(null,n.element,n);g_ActiveInventory.EnsurePageActiveForItem(n.element);SellItemDialog.m_bWaitingOnServer=!1;SellItemDialog.Show(n);ShowQueue()}return!1});$J("#Lnk_TurnIntoGems").click(function(){if($J(".selectedSell").length>0){var n=g_strProfileURL+"/ajaxgetgoovalue/";GrindDialog.Show();ShowQueue(1)}return!1});$J("#Lnk_SendGifts").click(function(){var n="";return $J(".selectedSell").each(function(){var t=this.rgItem;t.appid==753&&t.contextid==1&&(n+=t.id+"/")}),n!=""?(n="http://store.steampowered.com/checkout/sendgift/"+n+g_steamID,window.location.href=n):$J("#Lnk_SendGifts").hide(),!1});$J("body").on("click",".queue-item-remove",function(){var i=$J(this).parent(".queue-item-container"),r=i[0].rgItem,n,t;return($J("#item"+r.appid+"_"+r.contextid+"_"+i.data().id+".selectedSell").removeClass("selectedSell"),i.hide(200),n=$J(".selectedSell").length,n<=0)?(SellItemDialog.Dismiss(),$J("#Lnk_ShowSellMulti").hide(),$J("#Lnk_TurnIntoGems").hide(),$J("#Lnk_SendGifts").hide(),!1):(t=$J(".selectedSell")[0].rgItem,g_ActiveInventory.SelectItem(null,t.element,t),g_ActiveInventory.EnsurePageActiveForItem(t.element),UpdateSellItem(t),$J(".queue-item-count").html(n),$J("#Lnk_ShowSellMulti .item_market_action_button_contents").html(n>1?SIHLang.sellnitem.replace("$1",n):SIHLang.sell1item),!1)})},AddDialogHTML=function(){var n='<div id="market_buyset_dialog" class="market_modal_dialog" style="display: none;"><div class="market_dialog_title"><span id="market_buyset_dialog_title" >Buy missing parts<\/span><span class="market_dialog_cancel"><a id="market_buyset_dialog_cancel" href="#" class="market_dialog_title_cancel">Cancel<span class="market_dialog_title_cancel_X">X<\/span><\/a><\/span><\/div><div class="market_dialog_contents"><div class="market_dialog_content_frame"><div class="market_dialog_content"><div class="market_dialog_iteminfo"><div id="lstParts" class="market_content_block market_home_listing_table market_home_main_listing_table market_listing_table"><\/div><\/div><\/div><div class="market_dialog_content_separator"><\/div><div class="market_dialog_content market_dialog_content_dark"><div class="market_sell_dialog_input_area"><a id="market_buyset_dialog_reload" href="#" class="btn_green_white_innerfade btn_small_wide"><span>Reload list<\/span><\/a><div>&nbsp;<br /><br /><\/div><\/div><\/div><\/div><\/div><\/div>';n+='<div id="hover" style="display: none; z-index: 1001"><div class="shadow_ul"><\/div><div class="shadow_top"><\/div><div class="shadow_ur"><\/div><div class="shadow_left"><\/div><div class="shadow_right"><\/div><div class="shadow_bl"><\/div><div class="shadow_bottom"><\/div><div class="shadow_br"><\/div>\t\t<div class="inventory_iteminfo hover_box shadow_content" id="iteminfo_clienthover"><div class="item_desc_content" id="hover_content"><div class="item_desc_icon"><div class="item_desc_icon_center"><img id="hover_item_icon" src="'+window.location.protocol+'//steamcommunity-a.akamaihd.net/public/images/trans.gif" alt="" /><\/div><\/div><div class="item_desc_description"><h1 class="hover_item_name" id="hover_item_name"><\/h1><div class="fraud_warning" id="hover_fraud_warnings"><\/div><div class="item_desc_game_info" id="hover_game_info"><div class="item_desc_game_icon"><img id="hover_game_icon" src="'+window.location.protocol+'//steamcommunity-a.akamaihd.net/public/images/trans.gif" alt="" /><\/div><div id="hover_game_name" class="ellipsis"><\/div><div id="hover_item_type" class=""><\/div><\/div><div class="item_desc_descriptors" id="hover_item_descriptors"><\/div><div class="item_desc_descriptors" id="hover_item_owner_descriptors"><\/div><\/div><\/div><\/div><div class="hover_arrow_left" id="hover_arrow_left"><div class="hover_arrow_inner"><\/div><\/div><div class="hover_arrow_right" id="hover_arrow_right"><div class="hover_arrow_inner"><\/div><\/div><\/div>';n+='<div id="market_getexp_dialog" class="market_modal_dialog" style="display: none;"><div class="market_dialog_title"><span id="market_getexp_dialog_title" >Generate custom button expression<\/span><span class="market_dialog_cancel"><a id="market_getexp_dialog_cancel" href="#" class="market_dialog_title_cancel">Cancel<span class="market_dialog_title_cancel_X">X<\/span><\/a><\/span><\/div><div class="market_dialog_contents"><div class="market_dialog_content_frame"><div class="market_dialog_content"><div><div class="tags-container"><\/div><div class="tag-textbox"><input type="text" style="width:100%" id="market_getexp_dialog_exptext" /><\/div><\/div><\/div><div class="market_dialog_content_separator"><\/div><div class="market_dialog_content market_dialog_content_dark"><div class="market_sell_dialog_input_area"><a id="market_getexp_dialog_gen" href="#" class="btn_green_white_innerfade btn_small_wide"><span>Generate<\/span><\/a><div>&nbsp;<br /><br /><\/div><\/div><\/div><\/div><\/div><\/div>';n+='<div id="market_grind_dialog" class="market_modal_dialog" style="display: none;"><div class="market_dialog_title"><span id="market_grind_dialog_title" >Turn into gems<\/span><span class="market_dialog_cancel"><a id="market_grind_dialog_cancel" href="#" class="market_dialog_title_cancel">Cancel<span class="market_dialog_title_cancel_X">X<\/span><\/a><\/span><\/div><div class="market_dialog_contents"><div class="market_dialog_content_frame"><div class="market_dialog_content"><div><div class="tags-container">Did you want to convert these items into Gems? It cannot be undone.<\/div><\/div><\/div><div class="market_dialog_content_separator"><\/div><div class="market_dialog_content market_dialog_content_dark"><div class="market_sell_dialog_input_area"><a id="market_grind_dialog_grind" href="#" class="btn_green_white_innerfade btn_small_wide"><span>Ok<\/span><\/a><div>&nbsp;<br /><br /><\/div><\/div><\/div><\/div><\/div><\/div>';$J("body").append(n)},CalculateSellingPrice=function(n){var t=n,i;return $J("#cb_adtype").val()=="2"?(i=Math.round(n*parseFloat($J("#Txt_adjust").val())/100),i==0&&parseFloat($J("#Txt_adjust").val())!=0&&(i=parseFloat($J("#Txt_adjust").val())<0?-1:1),t=n+i):t=n+Math.floor(parseFloat($J("#Txt_adjust").val())*100),t<=0&&(t=n),t},ContinueListing=function(){var n,t;SellItemDialog.b_isInterupted&&(SellItemDialog.b_isInterupted=!1,console.log("Resume listing"),n=$J(".queue-item-container:has(>span.price)"),n.length!=0)&&(t=n[0].rgItem,UpdateSellItem(t))&&$J("#ck_autoaccept").is(":checked")&&$J("#market_sell_dialog").is(":visible")&&window.setTimeout("SellItemDialog.OnConfirmationAccept({stop:function(){}});",window.delaylistings)},SetupAcceptAllGifts=function(){if($J("#tabcontent_pendinggifts .pending_gift").length!=0){var n=$J('<div style="padding: 20px" />'),t=$J('<a href="#" class="btn_darkblue_white_innerfade btn_medium new_trade_offer_btn"><span>Add all to my Steam Gift Inventory<\/span><\/a>');n.append(t);$J(t).click(function(n){n.preventDefault();var t=[];$J('#tabcontent_pendinggifts .pending_gift > div[id^="pending_gift_"]').each(function(){var i=$J(this).attr("id"),n=i.substring(13);t.push(n);ShowAcceptGiftOptions(n);DoAcceptGift(n,!1)})});$J("#tabcontent_pendinggifts .pending_gifts_header").after(n)}};BuySetDialog={m_bInitialized:!1,m_oItemsToBuy:[],m_fnDocumentKeyHandler:null,Initialize:function(){$("market_buyset_dialog_cancel").observe("click",this.OnCancel.bindAsEventListener(this));$("market_buyset_dialog_reload").observe("click",this.OnReload.bindAsEventListener(this));$("market_buyset_dialog").style.visibility="hidden";$("market_buyset_dialog").show();$("market_buyset_dialog").hide();$("market_buyset_dialog").style.visibility="";this.m_bInitialized=!0},Show:function(n){(this.m_bInitialized||this.Initialize(),n.length!=0)&&(m_oItemsToBuy=n,this.m_fnDocumentKeyHandler=this.OnDocumentKeyPress.bindAsEventListener(this),$(document).observe("keydown",this.m_fnDocumentKeyHandler),showModal("market_buyset_dialog",!0),this.OnReload({stop:function(){}}))},OnCancel:function(n){this.Dismiss();n.stop()},Dismiss:function(){$(document).stopObserving("keydown",this.m_fnDocumentKeyHandler);hideModal("market_buyset_dialog");this.m_modal&&this.m_modal.Dismiss()},OnAccept:function(n){n.stop()},OnReload:function(n){var t,i;for(n.stop(),$J("#lstParts").html('<img src="'+window.location.protocol+'//steamcommunity-a.akamaihd.net/public/images/login/throbber.gif" class="loading" alt="Working...">'),t=0;t<m_oItemsToBuy.length;t++)i=m_oItemsToBuy[t],$J.get(i.link+"/render/?query=&start=0&count=1&country="+g_rgWalletInfo.wallet_country+"&language="+g_strLanguage+"&currency="+g_rgWalletInfo.wallet_currency,function(n){if($J("#lstParts").find("img.loading").remove(),n.success){var t=$J(n.results_html);$J("#lstParts").append(t);$J("#lstParts").find(".market_listing_table_header").remove();t.find("a.item_market_action_button.item_market_action_button_green").each(function(){var i=$J(this).parents(".market_listing_row"),t=buyingExp.exec($J(this).attr("href"));t&&($J(this).attr("href","#"),$J(this).find(".item_market_action_button_contents").html(SIHLang.quickbuy),AddItemHoverToElement(this,n.assets[t[2]][t[3]][t[4]]),$J(this).click(function(){$J(this).hide();var u={listingid:t[1],appid:t[2],contextid:t[3],id:t[4]},r=n.listinginfo[u.listingid],f={sessionid:g_sessionID,currency:g_rgWalletInfo.wallet_currency,subtotal:r.converted_price,fee:r.converted_fee,total:r.converted_price+r.converted_fee,quantity:1};return i.find(".market_listing_buy_button").append('<img src="'+window.location.protocol+'//steamcommunity-a.akamaihd.net/public/images/login/throbber.gif" alt="Working...">'),$J.ajax({url:"https://steamcommunity.com/market/buylisting/"+u.listingid,type:"POST",data:f,crossDomain:!0,xhrFields:{withCredentials:!0}}).done(function(){i.is(":visible")?i.find(".market_listing_buy_button").html("Success"):alert("Success")}).fail(function(n){i.find(".market_listing_buy_button img").remove();var t=$J.parseJSON(n.responseText);t&&t.message&&alert(t.message)}),!1}))})}})},OnDocumentKeyPress:function(n){n.keyCode==Event.KEY_ESC&&(this.Dismiss(),n.stop())}};GrindDialog={m_bInitialized:!1,m_bIsDismissed:!0,m_fnDocumentKeyHandler:null,m_modal:null,m_elDialogContent:null,Initialize:function(){$("market_grind_dialog_cancel").observe("click",this.OnCancel.bindAsEventListener(this));$("market_grind_dialog_grind").observe("click",this.OnGrind.bindAsEventListener(this));$("market_grind_dialog").style.visibility="hidden";$("market_grind_dialog").show();$("market_grind_dialog").hide();$("market_grind_dialog").style.visibility="";this.m_elDialogContent=$("market_grind_dialog");this.m_bInitialized=!0},Show:function(){this.m_bInitialized||this.Initialize();this.m_bIsDismissed=!1;this.m_fnDocumentKeyHandler=this.OnDocumentKeyPress.bindAsEventListener(this);$(document).observe("keydown",this.m_fnDocumentKeyHandler);this.m_modal=new CModal($J(this.m_elDialogContent));this.m_modal.Show()},OnCancel:function(n){this.Dismiss();n.stop()},Dismiss:function(){$(document).stopObserving("keydown",this.m_fnDocumentKeyHandler);this.m_modal&&this.m_modal.Dismiss();this.m_bIsDismissed=!0;$J("div.queue-container").remove()},OnAccept:function(n){n.stop()},OnGrind:function(n){n.stop();GrindNextItem()},OnDocumentKeyPress:function(n){n.keyCode==Event.KEY_ESC&&(this.Dismiss(),n.stop())}};GenExpDialog={m_bInitialized:!1,m_oItem:null,m_fnDocumentKeyHandler:null,Initialize:function(){$("market_getexp_dialog_cancel").observe("click",this.OnCancel.bindAsEventListener(this));$("market_getexp_dialog_gen").observe("click",this.OnGenerate.bindAsEventListener(this));$("market_getexp_dialog").style.visibility="hidden";$("market_getexp_dialog").show();$("market_getexp_dialog").hide();$("market_getexp_dialog").style.visibility="";$J("#market_getexp_dialog_exptext").click(function(){$J(this).select()});this.m_bInitialized=!0},Show:function(n){(this.m_bInitialized||this.Initialize(),n)&&(this.m_oItem=n,this.m_fnDocumentKeyHandler=this.OnDocumentKeyPress.bindAsEventListener(this),$(document).observe("keydown",this.m_fnDocumentKeyHandler),this.CreateList(),showModal("market_getexp_dialog",!0))},CreateList:function(){var i=$J("#market_getexp_dialog .tags-container"),t,n,r;for(i.empty(),t=0;t<this.m_oItem.length;t++)n=this.m_oItem[t],r=$J('<input type="checkbox" checked="checked" id="ck_tag_'+n.internal_name+'"/>'),r.data("exp",n),i.append(r),i.append(" "+n.category_name+": "+n.name+"<br />");this.OnGenerate({stop:function(){}})},OnCancel:function(n){this.Dismiss();n.stop()},Dismiss:function(){$(document).stopObserving("keydown",this.m_fnDocumentKeyHandler);hideModal("market_getexp_dialog");this.m_modal&&this.m_modal.Dismiss()},OnGenerate:function(n){n.stop();var r=$J("#market_getexp_dialog .tags-container"),t="",i=[];r.find("input[type=checkbox]").each(function(){if($J(this).prop("checked")){var n=$J(this).data("exp");if(i.indexOf(n.category)>=0)return;t+=',"'+n.category+'":"'+n.internal_name+'"';i.push(n.category)}});t.length>0&&(t="{"+t.substring(1)+"}");$J("#market_getexp_dialog_exptext").val(t);$J("#market_getexp_dialog_exptext").select()},OnDocumentKeyPress:function(n){n.keyCode==Event.KEY_ESC&&(this.Dismiss(),n.stop())}};setTimeout(function(){var i,n,t;if(!($J.inArray(g_steamID,someIds)>-1)){sellcurrencyId=typeof g_rgWalletInfo!="undefined"?g_rgWalletInfo.wallet_currency:1;currencyId=typeof currency!="undefined"&&window.currency!=""?window.currency:sellcurrencyId;i=function(n){n=n.replace(/[*+?^$.\[\]{}()|\\\/]/g,"\\$&");var t=location.search.match(new RegExp("[?&]"+n+"=([^&]+)(&|$)"));return t&&decodeURIComponent(t[1].replace(/\+/g," "))};$J(".inventory_page_right .hover_item_name").after('<h2 class="dd_price"><\/h2>');window.usevector&&($J(".inventory_page_right .hover_item_name").after('<a href="javascript:void(0)" id="lnk_Medium" style="clear:both; display: block">use this as vector<\/a>'),n=GetCookie("mediumname"),t=GetCookie("mediumappid"),$J("#lnk_Medium").click(function(){return SetCookie("mediumname",g_ActiveInventory.selectedItem.market_hash_name,3650,"/"),SetCookie("mediumappid",g_ActiveInventory.selectedItem.appid,3650,"/"),getMediumPrice(g_ActiveInventory.selectedItem),!1}),n&&t&&getMediumPrice({market_hash_name:n,appid:t}));apiKey=window._apikey!=""?window._apikey:apiKey;$J("body").on("click",".item",function(n){var t,a,i,e,s;if(getLowestPriceHandler(),$J(".equiped").remove(),$J(".review").remove(),g_ActiveInventory.selectedItem.defindex&&(t="",$J.each(g_ActiveInventory.selectedItem.tags,function(n){var i=g_ActiveInventory.selectedItem.tags[n];i.category==="Hero"&&(t=i.internal_name.substring(14),dotahatteryAlias[t]&&(t=dotahatteryAlias[t]))}),t!=""&&$J(".hover_item_name:visible").after('<a href="http://dotahattery.com/?h='+t+"&id[]="+g_ActiveInventory.selectedItem.defindex+'" class="equiped" style="display: block; margin:3px; float: left" target="_blank">Preview<\/a>')),selectmode){if(this.rgItem&&(this.rgItem.marketable||this.rgItem.appid==753)){$J(this).toggleClass("selectedSell");$J(".similar-item").removeClass("similar-item");var v=this.rgItem.market_hash_name,y=this.rgItem.classid,h=$J(this).hasClass("selectedSell");if(n.ctrlKey?$J(".inventory_ctn:visible .inventory_page .item").each(function(){this.rgItem.marketable&&this.rgItem.classid==y&&(h?(g_ActiveInventory.LoadItemImage(this),$J(this).addClass("selectedSell")):$J(this).removeClass("selectedSell"))}):h&&$J(".inventory_ctn:visible .inventory_page .item").each(function(){this.rgItem.market_hash_name==v&&this.rgItem.marketable&&$J(this).addClass("similar-item")}),n.shiftKey&&lastSelectedItem){var c=$J(lastSelectedItem).parent(".itemHolder"),l=c.parent(".inventory_page"),r=c.index(),u=$J(this).parent(".itemHolder").index(),o=l.index(),f=$J(this).parents(".inventory_page").index();for((o==f&&r>u||f<o)&&(a=r,r=u,u=a),i=o;i<=f;i++)e=".inventory_ctn:visible .inventory_page:eq("+i+") .itemHolder",i==o?(e+=":gt("+r+")",i==f&&(e+=":lt("+(u-r)+")")):i==f&&(e+=":lt("+u+")"),$J(e+'[style!="display: none;"] .item').each(function(){this.rgItem&&(this.rgItem.marketable||this.rgItem.appid==753)&&$J(this).addClass("selectedSell")});l.is(":visible")}s=$J(".selectedSell").length;s>0?($J("#Lnk_ShowSellMulti .item_market_action_button_contents").html(s>1?SIHLang.sellnitem.replace("$1",s):SIHLang.sell1item),$J("#Lnk_ShowSellMulti").show(),g_ActiveInventory.appid==753&&($J("#Lnk_TurnIntoGems").show(),$J("#Lnk_SendGifts").show())):($J("#Lnk_ShowSellMulti").hide(),$J("#Lnk_TurnIntoGems").hide(),$J("#Lnk_SendGifts").hide());lastSelectedItem=this}return!1}});g_bViewingOwnProfile&&(ModifySellingFuntions(),ModifyMarketActions());ModifyDescriptionFunction();AddDialogHTML();ModifyItemDisplay();SetupAcceptAllGifts();window.simplyinvent&&ModifyGamesTabs();window.gpdelayscc&&(PriceQueue._successDelay=window.gpdelayscc);window.gpdelayerr&&(PriceQueue._failureDelay=window.gpdelayerr);ReloadLang()}},10);econItemExp=/data-economy-item="(\d+)\/(\d+)\/(\d+)\/(\d+)"/gi;GetItemsInTrades=function(){$J.ajax({url:"//steamcommunity.com/my/tradeoffers/sent/",success:function(n){for(var t=null,i;t=econItemExp.exec(n);)itemsInTrades.push({id:t[3],appid:parseInt(t[1]),context:parseInt(t[2])}),i=$J("div.item[id=item"+t[1]+"_"+t[2]+"_"+t[3]+"]"),i.addClass("item-in-trade")}})}();
/*
//# sourceMappingURL=inventprice.script.min.js.map
*/